#define MAX 2147483646
#define MAX_F 3.402823466e+35F
#define EPS 1e-12

#include <stdio.h>
#include <math.h>
#include <Windows.h>

double verification_f()
{
	double f;
	char term;
	while (1)
	{
		rewind(stdin);
		if (scanf_s("%lf%c", &f, &term) != 2 || term != '\n' || (f > MAX_F&& f < -MAX_F))
		{
			printf("Неверный ввод. \n");
		}
		else
		{
			break;
		}
	}
	return f;
}

double fact(long double check, double x, long long int n)
{
	check = (check * x * x) / ((n - 1) * n);
	return check;
}


int main()
{
	SetConsoleCP(1251);
	SetConsoleOutputCP(1251);
	double x;
	long long int n = 1;
	long double sinX = 0;
	double epsilon;
	long double check;
	printf("Введите х\n");
	x = verification_f(); 
	sinX = x;
	check = x;
	printf("Введите epsilon большее 0, но меньше 1\n");
	do
	{
		epsilon = verification_f();
		if (epsilon >= 1 || epsilon < 0 || (epsilon > -EPS && epsilon < EPS))
		{
			printf("Введите epsilon большее 0, но меньше 1\n");
		}
	} 
	while (epsilon >= 1 || epsilon < 0 || (epsilon > -EPS && epsilon < EPS));
	
	while (sinX != sin(x))
	{
		n += 2;
		check = (-1) * fact(check, x, n);		
		sinX = sinX + check;
		
		if (fabs(sinX - sin(x)) < epsilon)
		{
			break;
		}
	}
	printf("%s %lld", "n =", n);
	printf("%s %lf", "\nsin(x) =", sin(x));
	printf("%s %lf", "\nsinX =", sinX);
	return 0;
}
